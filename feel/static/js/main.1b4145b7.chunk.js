(this["webpackJsonpfeel-input-component-showcase"]=this["webpackJsonpfeel-input-component-showcase"]||[]).push([[2],{299:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var i=n(11),o=n.n(i),r=n(222),s=n(21),a=n(124),l=n(223),u=n.n(l),d=n(0),c=n(1),f=n(129),h=function(){function e(t){Object(d.a)(this,e),this.feelGwt=void 0,this.feelGwt=t}return Object(c.a)(e,[{key:"getSuggestions",value:function(e,t,n){var i=0;try{var o;return((null===(o=this.feelGwt)||void 0===o?void 0:o.getSuggestions(e,t,n).toArray())||[]).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return{kind:f.b.CompletionItemKind.Function,insertTextRules:f.b.CompletionItemInsertTextRule.InsertAsSnippet,label:e,insertText:e,sortText:String(++i).padStart(5,"0")}}))||[]}catch(r){return[]}}},{key:"evaluate",value:function(e){var t="";try{var n;t=(null===(n=this.feelGwt)||void 0===n?void 0:n.evaluate(e))||""}catch(i){return""}return("Eval error."===t||t.startsWith("org.kie.dmn.feel"))&&(t=""),t}}],[{key:"getInstance",value:function(){if(void 0===window.__KIE__FEEL__)try{window.__KIE__FEEL__=new e(new org.kie.dmn.feel.client.showcase.FeelJS)}catch(t){return console.log("inst error"),new e}return window.__KIE__FEEL__}}]),e}(),m=(n(299),n(6)),v=n(224),g="feel-language",b="feel-theme",p=function(){function e(){Object(d.a)(this,e),this.standaloneEditor=void 0,this.domElement=void 0,this.onChange=void 0,this.onKeyDown=void 0,this.options=void 0,this.onBlur=void 0}return Object(c.a)(e,[{key:"withDomElement",value:function(e){return this.domElement=e,this}},{key:"withOnChange",value:function(e){return this.onChange=e,this}},{key:"withOnBlur",value:function(e){return this.onBlur=e,this}},{key:"withOptions",value:function(e){return this.options=e,this}},{key:"createEditor",value:function(){return this.dispose(),this.createStandaloneEditor()}},{key:"dispose",value:function(){var e;null===(e=this.standaloneEditor)||void 0===e||e.dispose()}},{key:"createStandaloneEditor",value:function(){var e,t=this;if(!this.domElement)throw new Error("FEEL Monaco editor cannot be created without a 'domElement'.");return this.standaloneEditor=f.a.create(this.domElement,(e=this.options,Object(v.a)({language:g,theme:b,fontSize:15,contextmenu:!1,useTabStops:!1,folding:!1,automaticLayout:!0,lineNumbersMinChars:0,overviewRulerBorder:!1,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,scrollbar:{useShadows:!1},minimap:{enabled:!1}},e))),this.onChange&&this.standaloneEditor.onDidChangeModelContent((function(e){var n;return t.onChange(e,(null===(n=t.standaloneEditor)||void 0===n?void 0:n.getValue())||"")})),this.onBlur&&this.standaloneEditor.onDidBlurEditorText(this.onBlur),this.onKeyDown&&this.standaloneEditor.onKeyDown(this.onKeyDown),this.standaloneEditor.focus(),this.standaloneEditor}}],[{key:"getEditorBuilder",value:function(t){return void 0===window.__KIE__MONACO__EDITOR__&&($(),E(),w(),_(t),window.__KIE__MONACO__EDITOR__=new e),window.__KIE__MONACO__EDITOR__}},{key:"getStandaloneEditor",value:function(){return this.getEditorBuilder().standaloneEditor}},{key:"dispose",value:function(){var e;null===(e=this.getEditorBuilder().standaloneEditor)||void 0===e||e.dispose(),this.getEditorBuilder().standaloneEditor=void 0}},{key:"isInstantiaded",value:function(){return void 0!==this.getEditorBuilder().standaloneEditor}}]),e}(),$=(n(300),function(){f.b.register({id:g})}),E=function(){f.a.defineTheme(b,{base:"vs",inherit:!0,rules:[{token:"feel-keyword",foreground:"26268C",fontStyle:"bold"},{token:"feel-numeric",foreground:"3232E7"},{token:"feel-boolean",foreground:"26268D",fontStyle:"bold"},{token:"feel-string",foreground:"2A9343"},{token:"feel-function",foreground:"3232E8"}],colors:{"editorLineNumber.foreground":"#000000"}})},w=function(){f.b.setMonarchTokensProvider(g,{tokenizer:{root:[[/(?:true|false)/,"feel-boolean"],[/[0-9]+/,"feel-numeric"],[/(?:"(?:.*?)")/,"feel-string"],[/(?:(?:[a-z ]+\()|(?:\()|(?:\)))/,"feel-function"],[/(?:if|then|else)/,"feel-keyword"],[/(?:for|in|return|if|then|else|some|every|satisfies|instance|of|function|external|or|and|between|not|null)/,"feel-keyword"]]}})},_=function(e){f.b.registerCompletionItemProvider(g,{provideCompletionItems:function(t,n){var i=function(){var e,t=[],n=[["if","if $1 then\n\t$0\nelse\n\t"],["for","for element in $1 return\n\t$0"]],i=[["substring(string, start position, length?)","substring($1, $2, $3)"],["string length(string)","string length($1)"],["upper case(string)","upper case($1)"],["lower case(string)","lower case($1)"],["substring before(string, match)","substring before($1, $2)"],["substring after(string, match)","substring after($1, $2)"],["replace(input, pattern, replacement, flags?)","replace($1, $2, $3, $4)"],["contains(string, match)","contains($1, $2)"],["starts with(string, match)","starts with($1, $2)"],["ends with(string, match)","ends with($1, $2)"],["matches(input, pattern, flags?)","matches($1, $2, $3)"],["split(string, delimiter)","split($1, $2)"],["list contains(list, element)","list contains($1, $2)"],["count(list)","count($1)"],["min(list)","min($1)"],["max(list)","max($1)"],["sum(list)","sum($1)"],["mean(list)","mean($1)"],["and(list)","and($1)"],["or(list)","or($1)"],["sublist(list, start position, length?)","sublist($1, $2, $3)"],["append(list, item...)","append($1, $2)"],["concatenate(list...)","concatenate($1)"],["insert before(list, position, newItem)","insert before($1, $2, $3)"],["remove(list, position)","remove($1, $2)"],["reverse(list)","remove($1)"],["index of(list, match)","index of($1, $2)"],["union(list...)","union($1)"],["distinct values(list)","distinct values($1)"],["flatten(list)","flatten($1)"],["product(list)","product($1)"],["median(list)","median($1)"],["stddev(list)","stddev($1)"],["mode(list)","mode($1)"],["decimal(n, scale)","decimal($1, $2)"],["floor(n)","floor($1)"],["ceiling(n)","ceiling($1)"],["abs(n)","abs($1)"],["modulo(dividend, divisor)","modulo($1, $2)"],["sqrt(number)","sqrt($1)"],["log(number)","log($1)"],["exp(number)","exp($1)"],["odd(number)","odd($1)"],["even(number)","even($1)"],["not(negand)","not($1)"]],o=Object(m.a)(n);try{for(o.s();!(e=o.n()).done;){var r=e.value;t.push({kind:f.b.CompletionItemKind.Keyword,insertTextRules:f.b.CompletionItemInsertTextRule.InsertAsSnippet,label:r[0],insertText:r[1]})}}catch(u){o.e(u)}finally{o.f()}var s,a=Object(m.a)(i);try{for(a.s();!(s=a.n()).done;){var l=s.value;t.push({kind:f.b.CompletionItemKind.Function,insertTextRules:f.b.CompletionItemInsertTextRule.InsertAsSnippet,label:l[0],insertText:l[1]})}}catch(u){a.e(u)}finally{a.f()}return t}();if(e){var o=e(t.getValue(),n.lineNumber,n.column-1);o.length>0&&(i=o)}return{suggestions:i}}})},O=n(140),j=function(e){var t=e.enabled,n=e.value,i=e.suggestionProvider,o=e.onBlur,r=e.onChange,s=e.options,l=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;null===(e=p.getStandaloneEditor())||void 0===e||e.setValue(n||"")}),[n]),Object(a.useEffect)((function(){t?p.getEditorBuilder(i).withDomElement(l.current).withOnBlur(o).withOnChange(r).withOptions(s).createEditor().setValue(n||""):p.dispose()}),[t]),Object(a.useMemo)((function(){return Object(O.jsx)("div",{className:"feel-input",children:Object(O.jsx)("div",{ref:l})})}),[])},y=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),d=u[0],c=u[1],f=Object(a.useCallback)((function(e,t,n){return h.getInstance().getSuggestions(e,t,n)}),[]);Object(a.useEffect)((function(){var e=h.getInstance().evaluate(n);""!==e&&c(e),window.clearTimeout(window.__KIE__FEEL__THROTTLING___),window.__KIE__FEEL__THROTTLING___=window.setTimeout((function(){Object(r.a)(o.a.mark((function t(){var i,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://piscine-madame-68280.herokuapp.com?"+new URLSearchParams({feel:n,clientResult:e}));case 2:return i=t.sent,t.next=5,i.text();case 5:(r=t.sent).includes("Server Error")||c(r);case 7:case"end":return t.stop()}}),t)})))()}),500)}),[n]);var m=Object(a.useMemo)((function(){return Object(O.jsx)(j,{enabled:!0,suggestionProvider:f,onChange:function(e,t){i(t)},options:{lineNumbers:"on"}})}),[i,f]),v=Object(a.useMemo)((function(){return Object(O.jsxs)("div",{className:"feel-output",children:[Object(O.jsx)("h3",{children:"FEEL output"}),d]})}),[d]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"feel-editor",children:[m,v]})})};u.a.render(Object(O.jsx)(y,{}),document.getElementById("feel-editor"))}},[[302,3,4]]]);
//# sourceMappingURL=main.1b4145b7.chunk.js.map